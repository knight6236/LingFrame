# çµç‘ (LingFrame)

![Status](https://img.shields.io/badge/Status-Core_Implemented-green)
![License](https://img.shields.io/badge/License-Apache_2.0-blue)
![Java](https://img.shields.io/badge/Java-21-orange)
![Spring Boot](https://img.shields.io/badge/Spring_Boot-3.5.6-brightgreen)
[![Help Wanted](https://img.shields.io/badge/PRs-welcome-brightgreen)](../../pulls)

> ğŸŸ¢ **é¡¹ç›®çŠ¶æ€ï¼šæ ¸å¿ƒæ¡†æ¶å·²å®ç°**
>
> æ’ä»¶ç®¡ç†ã€çƒ­é‡è½½ã€æƒé™æ²»ç†ã€Spring Boot 3 é›†æˆç­‰æ ¸å¿ƒåŠŸèƒ½å·²å¯ç”¨ã€‚
> éƒ¨åˆ†åŸºç¡€è®¾æ–½æ’ä»¶å’Œå•å…ƒæµ‹è¯•ä»åœ¨å®Œå–„ä¸­ã€‚

---

## ğŸ“– æ„¿æ™¯

**LingFrame** æ˜¯ä¸€ä¸ªåŸºäº JVM çš„è¿è¡Œæ—¶æ²»ç†æ¡†æ¶ã€‚

æˆ‘ä»¬è‡´åŠ›äºä¸ºç°ä»£ Java åº”ç”¨æ„å»ºä¸€ä¸ª**å¯æ§ã€å¯æ‰©å±•ã€å¯æ¼”è¿›**çš„è¿è¡Œæ—¶ä½“ç³»ã€‚

> **ä¸€å¥è¯æ„¿æ™¯**ï¼šè®© JVM åº”ç”¨å…·å¤‡å¦‚åŒæ“ä½œç³»ç»Ÿèˆ¬çš„æ’ä»¶æ¨¡å‹å’Œå¯æ§èƒ½åŠ›ã€‚

---

## âœ… å·²å®ç°çš„æ ¸å¿ƒèƒ½åŠ›

| èƒ½åŠ›                  | è¯´æ˜                                      | æ ¸å¿ƒç±»                                |
| --------------------- | ----------------------------------------- | ------------------------------------- |
| **æ’ä»¶ç”Ÿå‘½å‘¨æœŸ**      | å®‰è£…ã€å¸è½½ã€çƒ­é‡è½½ï¼Œæ”¯æŒè“ç»¿éƒ¨ç½²          | `PluginManager`, `PluginRuntime`, `InstancePool` |
| **ç±»éš”ç¦»**            | Child-First ç±»åŠ è½½å™¨ + ç™½åå•å§”æ´¾         | `PluginClassLoader`                   |
| **Spring ä¸Šä¸‹æ–‡éš”ç¦»** | æ¯ä¸ªæ’ä»¶ç‹¬ç«‹çš„çˆ¶å­ ApplicationContext     | `SpringPluginContainer`               |
| **æœåŠ¡æ‰©å±•**          | `@LingService` æ³¨è§£å®ç° FQSID è·¯ç”±        | `ServiceRegistry`, `SmartServiceProxy` |
| **æœåŠ¡æ³¨å…¥**          | `@LingReference` æ³¨è§£è‡ªåŠ¨æ³¨å…¥æ’ä»¶æœåŠ¡     | `LingReferenceInjector`, `GlobalServiceRoutingProxy` |
| **æƒé™æ²»ç†**          | æ™ºèƒ½æ¨å¯¼ + `@RequiresPermission` æ˜¾å¼å£°æ˜ | `GovernanceKernel`, `GovernanceStrategy` |
| **å®¡è®¡è¿½è¸ª**          | `@Auditable` æ³¨è§£ + å¼‚æ­¥å®¡è®¡æ—¥å¿—          | `AuditManager`                        |
| **å¼€å‘æ¨¡å¼**          | æ–‡ä»¶ç›‘å¬ + é˜²æŠ–çƒ­é‡è½½                     | `HotSwapWatcher`                      |

---

## ğŸ¯ æˆ‘ä»¬è¦è§£å†³ä»€ä¹ˆé—®é¢˜

| ç—›ç‚¹                 | ç°çŠ¶å›°å¢ƒ                    | LingFrame æ–¹æ¡ˆ         |
| :------------------- | :-------------------------- | :--------------------- |
| **æ‰©å±•èƒ½åŠ›ç¼ºä¹è¾¹ç•Œ** | æ‰©å±•é€»è¾‘ä¸å†…æ ¸é«˜åº¦è€¦åˆ      | ä¸‰å±‚æ¶æ„ + ä¸Šä¸‹æ–‡éš”ç¦»  |
| **ç¼ºä¹å®‰å…¨ä»²è£**     | ä¸šåŠ¡æ¨¡å—å¯ç›´æ¥æ“ä½œ DB/Redis | é›¶ä¿¡ä»» + Core ä»£ç†é‰´æƒ |
| **åŠ¨æ€åŠ è½½èƒ½åŠ›ä¸è¶³** | åªèƒ½å¯åŠ¨æ—¶åŠ è½½              | è“ç»¿éƒ¨ç½² + çƒ­é‡è½½      |

---

## ğŸ‘¤ ç›®æ ‡ç”¨æˆ·

| åœºæ™¯                   | å…¸å‹éœ€æ±‚                                        |
| ---------------------- | ----------------------------------------------- |
| **å¯æ‰©å±•äº§å“**         | æ ¸å¿ƒäº§å“ + åŠŸèƒ½æ’ä»¶æ¨¡å¼ï¼ˆIDEã€CMSã€ä½ä»£ç å¹³å°ï¼‰ |
| **äºŒæ¬¡å¼€å‘å¹³å°**       | æä¾›æ ‡å‡†å†…æ ¸ï¼Œå…è®¸ç¬¬ä¸‰æ–¹å¼€å‘è€…æ‰©å±•åŠŸèƒ½          |
| **SaaS å¤šç§Ÿæˆ·å®šåˆ¶**    | ä¸åŒç§Ÿæˆ·å¯ç”¨ä¸åŒåŠŸèƒ½æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½              |
| **æ’ä»¶å¸‚åœº**           | ç”¨æˆ·å¯è‡ªè¡Œå®‰è£…ã€å¸è½½ã€å‡çº§åŠŸèƒ½æ¨¡å—              |
| **å¤§å‹ç³»ç»Ÿæ¨¡å—åŒ–æ”¹é€ ** | å°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¯ç‹¬ç«‹æ¼”è¿›çš„æ’ä»¶                |

---

## ğŸ’¡ æ ¸å¿ƒç†å¿µï¼šä¸‰å±‚æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Coreï¼ˆä»²è£æ ¸å¿ƒï¼‰                      â”‚
â”‚         ç”Ÿå‘½å‘¨æœŸç®¡ç† Â· æƒé™æ²»ç† Â· èƒ½åŠ›è°ƒåº¦ Â· ä¸Šä¸‹æ–‡éš”ç¦»    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Infrastructure Pluginsï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰           â”‚
â”‚              å­˜å‚¨ Â· ç¼“å­˜ Â· æ¶ˆæ¯ Â· æœç´¢                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Business Pluginsï¼ˆä¸šåŠ¡å±‚ï¼‰                   â”‚
â”‚              ç”¨æˆ·ä¸­å¿ƒ Â· è®¢å•æœåŠ¡ Â· æ”¯ä»˜æ¨¡å—               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®è®¾è®¡åŸåˆ™**ï¼š

1. **Core æ˜¯å”¯ä¸€ä»²è£è€…**ï¼šä¸æä¾›ä¸šåŠ¡èƒ½åŠ›ï¼Œåªè´Ÿè´£è°ƒåº¦ã€éš”ç¦»ä¸æƒé™æ§åˆ¶
2. **ä¸šåŠ¡æ’ä»¶"é›¶ä¿¡ä»»"**ï¼šæ‰€æœ‰èƒ½åŠ›è°ƒç”¨å¿…é¡»ç»è¿‡ Core ä»£ç†ä¸é‰´æƒ
3. **Spring ä¸Šä¸‹æ–‡éš”ç¦»**ï¼šåŸºäºçˆ¶å­ä¸Šä¸‹æ–‡å®ç°æ’ä»¶éš”ç¦»ï¼Œç¡®ä¿å¸è½½åæ— æ®‹ç•™

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Java 21+
- Maven 3.8+

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/lingframe/lingframe.git
cd lingframe

# ç¼–è¯‘å®‰è£…
mvn clean install -DskipTests

# è¿è¡Œç¤ºä¾‹å®¿ä¸»åº”ç”¨
cd lingframe-examples/lingframe-example-host-app
mvn spring-boot:run
```

### å®¿ä¸»åº”ç”¨é…ç½®

åœ¨ `application.yaml` ä¸­é…ç½® LingFrameï¼š

```yaml
lingframe:
  enabled: true
  dev-mode: true                    # å¼€å‘æ¨¡å¼ï¼Œæƒé™ä¸è¶³æ—¶ä»…è­¦å‘Š
  plugin-home: "plugins"            # æ’ä»¶ JAR åŒ…ç›®å½•
  plugin-roots:                     # æ’ä»¶æºç ç›®å½•ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
    - "../my-plugin/target/classes"
  auto-scan: true
  
  audit:
    enabled: true
    log-console: true
    queue-size: 1000
  
  runtime:
    default-timeout: 3s
    bulkhead-max-concurrent: 10
```

### åˆ›å»ºæ’ä»¶

1. åˆ›å»º Maven æ¨¡å—ï¼Œä¾èµ– `lingframe-api`
2. å®ç° `LingPlugin` æ¥å£
3. åˆ›å»º `plugin.yml` å…ƒæ•°æ®
4. ä½¿ç”¨ `@LingService` æš´éœ²æœåŠ¡

```java
// æ’ä»¶å…¥å£
@SpringBootApplication
public class MyPlugin implements LingPlugin {
    @Override
    public void onStart(PluginContext context) {
        System.out.println("Plugin started: " + context.getPluginId());
    }
}

// æš´éœ²æœåŠ¡
@Component
public class UserServiceImpl implements UserService {
    
    @LingService(id = "query_user", desc = "æŸ¥è¯¢ç”¨æˆ·")
    @Override
    public Optional<User> queryUser(String userId) {
        return userRepository.findById(userId);
    }
}
```

æ’ä»¶å…ƒæ•°æ® `plugin.yml`ï¼š

```yaml
id: my-plugin
version: 1.0.0
provider: "My Company"
description: "æˆ‘çš„æ’ä»¶"
mainClass: "com.example.MyPlugin"

governance:
  permissions:
    - methodPattern: "storage:sql"
      permissionId: "READ"
```

### è°ƒç”¨å…¶ä»–æ’ä»¶æœåŠ¡ï¼ˆä¸‰ç§æ–¹å¼ï¼‰

```java
// æ–¹å¼ä¸€ï¼š@LingReference æ³¨å…¥ï¼ˆå¼ºçƒˆæ¨èï¼‰
@Component
public class OrderService {
    
    @LingReference
    private UserService userService;  // è‡ªåŠ¨æ³¨å…¥
    
    @LingReference(pluginId = "user-plugin", timeout = 5000)
    private UserService userServiceV2;  // æŒ‡å®šæ’ä»¶å’Œè¶…æ—¶
    
    public Order createOrder(String userId) {
        User user = userService.queryUser(userId)
                .orElseThrow(() -> new RuntimeException("ç”¨æˆ·ä¸å­˜åœ¨"));
        return new Order(user);
    }
}

// æ–¹å¼äºŒï¼šPluginContext.getService()
Optional<UserService> service = context.getService(UserService.class);

// æ–¹å¼ä¸‰ï¼šFQSID åè®®è°ƒç”¨
Optional<User> user = context.invoke("user-plugin:query_user", userId);
```

---

## ğŸ“¦ æ¨¡å—ç»“æ„

```
lingframe/
â”œâ”€â”€ lingframe-api/              # å¥‘çº¦å±‚ï¼ˆæ¥å£ã€æ³¨è§£ã€å¼‚å¸¸ï¼‰
â”œâ”€â”€ lingframe-core/             # ä»²è£å†…æ ¸ï¼ˆæ’ä»¶ç®¡ç†ã€æ²»ç†ã€å®‰å…¨ï¼‰
â”œâ”€â”€ lingframe-runtime/          # è¿è¡Œæ—¶é›†æˆ
â”‚   â””â”€â”€ lingframe-spring-boot3-starter/  # Spring Boot 3.x é›†æˆ
â”œâ”€â”€ lingframe-plugins-infra/    # åŸºç¡€è®¾æ–½æ’ä»¶
â”‚   â”œâ”€â”€ lingframe-plugin-storage/  # æ•°æ®åº“è®¿é—®ï¼ŒSQL çº§æƒé™æ§åˆ¶
â”‚   â””â”€â”€ lingframe-plugin-cache/    # ç¼“å­˜è®¿é—®
â”œâ”€â”€ lingframe-examples/         # ç¤ºä¾‹
â”‚   â”œâ”€â”€ lingframe-example-host-app/     # å®¿ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ lingframe-example-plugin-user/  # ç”¨æˆ·æ’ä»¶
â”‚   â””â”€â”€ lingframe-example-plugin-order/ # è®¢å•æ’ä»¶
â”œâ”€â”€ lingframe-dependencies/     # ä¾èµ–ç‰ˆæœ¬ç®¡ç†
â””â”€â”€ lingframe-bom/              # å¯¹å¤–æä¾›çš„ BOM
```

### ä¸‰å±‚æ¶æ„å¯¹åº”

| å±‚çº§               | æ¨¡å—                        | èŒè´£                             |
| ------------------ | --------------------------- | -------------------------------- |
| **Core**           | `lingframe-core`            | ä»²è£æ ¸å¿ƒï¼šç”Ÿå‘½å‘¨æœŸã€æƒé™ã€è°ƒåº¦   |
| **Infrastructure** | `lingframe-plugins-infra/*` | åŸºç¡€è®¾æ–½ï¼šå­˜å‚¨ã€ç¼“å­˜ã€æ¶ˆæ¯       |
| **Business**       | ç”¨æˆ·æ’ä»¶                    | ä¸šåŠ¡é€»è¾‘ï¼šé€šè¿‡ Core è®¿é—®åŸºç¡€è®¾æ–½ |

---

## ğŸ†š ä¸ç°æœ‰æ–¹æ¡ˆçš„å·®å¼‚

| ç‰¹æ€§            | OSGi     | Java SPI | PF4J       | LingFrame         |
| :-------------- | :------- | :------- | :--------- | :---------------- |
| **æƒé™æ²»ç†**    | æœ‰ä½†å¤æ‚ | æ—        | æ—          | âœ… æ ¸å¿ƒç‰¹æ€§       |
| **èƒ½åŠ›ä»²è£**    | æœåŠ¡æ³¨å†Œ | æ—        | æ‰©å±•ç‚¹     | âœ… Core ä»£ç†      |
| **Spring é›†æˆ** | éœ€é€‚é…   | æ‰‹åŠ¨     | éœ€é¢å¤–å·¥ä½œ | âœ… åŸç”Ÿçˆ¶å­ä¸Šä¸‹æ–‡ |
| **çƒ­æ’æ‹”**      | âœ…       | âŒ       | âœ…         | âœ… è“ç»¿éƒ¨ç½²       |
| **è°ƒç”¨é“¾å®¡è®¡**  | éœ€æ‰©å±•   | æ—        | æ—          | âœ… å†…ç½®æ”¯æŒ       |
| **å­¦ä¹ æ›²çº¿**    | é™¡å³­     | å¹³ç¼“     | ä¸­ç­‰       | ä¸­ç­‰              |

---

## ğŸ“ è·¯çº¿å›¾

| é˜¶æ®µ        | ç›®æ ‡                                                | çŠ¶æ€          |
| :---------- | :-------------------------------------------------- | :------------ |
| **Phase 1** | æ ¸å¿ƒæ¡†æ¶ï¼šæ’ä»¶ç”Ÿå‘½å‘¨æœŸã€æƒé™æ²»ç†ã€Spring é›†æˆ       | âœ… **å·²å®Œæˆ** |
| **Phase 2** | èƒ½åŠ›å¢å¼ºï¼šç­–ç•¥å¼•æ“ã€çŠ¶æ€å¥æŸ„åŒ–ã€plugin.yml é…ç½®åŠ è½½ | ğŸ”„ è¿›è¡Œä¸­     |
| **Phase 3** | ç”Ÿæ€å®Œå–„ï¼šç¼“å­˜/æ¶ˆæ¯æ’ä»¶ã€å•å…ƒæµ‹è¯•ã€æ–‡æ¡£å®Œå–„         | â³ è®¡åˆ’ä¸­     |
| **Phase 4** | å¹³å°åŒ–ï¼šå­—èŠ‚ç æ²»ç†ã€è¡Œä¸ºæ²™ç®±ã€å¯è§‚æµ‹æ€§              | â³ è¿œæœŸè§„åˆ’   |

---

## ğŸ“š æ–‡æ¡£

- [å¿«é€Ÿå…¥é—¨](docs/getting-started.md) - 5 åˆ†é’Ÿä¸Šæ‰‹
- [æ’ä»¶å¼€å‘æŒ‡å—](docs/plugin-development.md) - å¼€å‘ä¸šåŠ¡æ’ä»¶
- [åŸºç¡€è®¾æ–½æ’ä»¶](docs/infrastructure-plugins.md) - å¼€å‘åŸºç¡€è®¾æ–½æ’ä»¶
- [æ¶æ„è®¾è®¡](docs/architecture.md) - æ·±å…¥äº†è§£æ¡†æ¶åŸç†
- [API å‚è€ƒ](docs/api-reference.md) - å®Œæ•´ API æ–‡æ¡£
- [è·¯çº¿å›¾](docs/roadmap.md) - é•¿æœŸæ„¿æ™¯ä¸æ¼”è¿›è®¡åˆ’

---

## ğŸ‘¥ å‚ä¸è´¡çŒ®

æˆ‘ä»¬éå¸¸æ¬¢è¿ç¤¾åŒºå‚ä¸ï¼š

1. **åŠŸèƒ½å¼€å‘**ï¼šæŸ¥çœ‹ [Issues](../../issues) è®¤é¢†ä»»åŠ¡
2. **æ¶æ„è®¨è®º**ï¼šåœ¨ [Discussions](../../discussions) å‘èµ·è¯é¢˜
3. **æ–‡æ¡£å®Œå–„**ï¼šå¸®åŠ©æ”¹è¿›æ–‡æ¡£ã€ç¼–å†™æ•™ç¨‹
4. **æµ‹è¯•è¡¥å……**ï¼šä¸ºæ ¸å¿ƒæ¨¡å—è¡¥å……å•å…ƒæµ‹è¯•

è¯¦è§ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)

â­ **Star** æœ¬ä»“åº“ï¼Œå…³æ³¨æˆ‘ä»¬çš„æ¯ä¸€æ­¥æˆé•¿ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **Apache License 2.0** æˆæƒåè®®ã€‚

**çµç‘ (LingFrame) â€”â€” è®© JVM åº”ç”¨å…·å¤‡æ“ä½œç³»ç»Ÿèˆ¬çš„æ’ä»¶èƒ½åŠ›ã€‚**
